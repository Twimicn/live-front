<template>
    <div class="bottom-nav-item-group">

    </div>
</template>
<style>
    .bottom-nav {
        width: 100%;
        border-top: solid 1px #ccc;
        background-color: #edededcc;
        position: fixed;
        bottom: 0;
        z-index: 99;
        box-shadow: 0 -1px 16px #bfbebe;
    }

    .bottom-nav-item-group {
        display: flex;
        flex-direction: row;
        justify-content: space-around;
    }

    .bottom-nav-item {
        padding: 0.25rem 0.75rem;
    }

    .bottom-nav-item-icon {
        font-size: 2.5rem;
        line-height: 1;
        text-align: center;
        color: #999999;
    }

    .bottom-nav-item-text {
        font-size: 0.5rem;
        text-align: center;
        color: #555555;
    }

    .bottom-nav-item.current .bottom-nav-item-icon,
    .bottom-nav-item.current .bottom-nav-item-text {
        color: deepskyblue;
    }

</style>
<script>
    (function () {
        function BottomNav($elem, conf) {
            this.$elem = $elem;
            this.navs = [];
            $elem.addClass('bottom-nav');
        }

        BottomNav.prototype.created = function () {
            var that = this;
            this.$elem.find('.bottom-nav-item-group').on('click', '.bottom-nav-item', function (e) {
                $(this).addClass('current').siblings().removeClass('current');
                var index = $(this).index();
                var nav = that.navs[index];
                that.$emit('change', {index: index, nav: nav, action: nav.action})
            });
        };

        BottomNav.prototype.setNavs = function (list, index) {
            if ($.isArray(list)) {
                this.navs = list;
                var html = '';
                for (var i = 0; i < list.length; i++) {
                    var f = list[i];
                    html += '<div class="bottom-nav-item' + (i === index ? ' current' : '') + '"><div class="bottom-nav-item-icon ol-icon ol-icon-' + f.icon + '"></div><div class="bottom-nav-item-text">' + f.text + '</div></div>'
                }
                this.$elem.find('.bottom-nav-item-group').html(html);
            }
        };

        Elaina.defineWidget(BottomNav);
    })();
</script>
